<template>
   <div className='list-container'>
    <span @click="this.showModel.bind(this)" className='add-user'>
      新增用户
    </span>
    <List />
    <AddUser v-show="show" :hide="this.hideModel.bind(this)"/>
    <div v-show="showChangeUS">
      <ChangeUserComponent />
    </div>
  </div>
</template>

<script>
  const Grass = require('@grass')
  
  module.exports = class UserList extends Grass.Component {
    // #temp
    constructor(props) {
      super(props)
      this.state = {
        show : false,
        showChangeUS: false,
      }
    }

    beforeCreate () {
      this.getComponent('ChangeUserComponent').on(data => {
        this.setState({showChangeUS: data})
      })

      this.getComponent('List').on(isShow => {
        if (typeof isShow === 'boolean') {
          this.setState({showChangeUS: isShow})
        }
      })
    }

    hideModel () {
      this.setState({show: false})
    }

    showModel () {
      this.setState({show: true})
    }

    component () {
      return {
        List: require('../list/index'),
        AddUser: require('../add-user/index'),
        ChangeUserComponent: require('../change-user-infor/index'),
      }
    }
  }
</script>

